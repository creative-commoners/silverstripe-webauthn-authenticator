!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./client/src/bundles/bundle.js")}({"./client/src/boot/index.js":function(e,t,n){"use strict";var r=n("./client/src/boot/registerComponentsB.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(r);window.document.addEventListener("DOMContentLoaded",function(){(0,o.default)()})},"./client/src/boot/registerComponentsB.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),u=r(o),i=n("./client/src/components/WebAuthn/Register.js"),a=r(i),c=n("./client/src/components/WebAuthn/Verify.js"),s=r(c);t.default=function(){u.default.component.registerMany({WebAuthnRegister:a.default,WebAuthnVerify:s.default})}},"./client/src/bundles/bundle.js":function(e,t,n){"use strict";n("./client/src/boot/index.js")},"./client/src/components/WebAuthn/Register.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n("./node_modules/react/index.js"),l=r(s),f=n("./node_modules/prop-types/index.js"),p=r(f),y=n("./client/src/lib/convert.js"),d=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.keyData&&this.initAuth()}},{key:"componentDidUpdate",value:function(e){this.props.keyData&&!e.keyData&&this.initAuth()}},{key:"initAuth",value:function(){var e=this.props,t=e.keyData,n=e.onCompleteRegistration,r=a({},t.user,{id:(0,y.base64ToByteArray)(t.user.id)}),o=a({},t,{user:r,challenge:(0,y.base64ToByteArray)(t.challenge)});window.navigator.credentials.create({publicKey:o}).then(function(e){n({credentials:btoa(JSON.stringify({id:e.id,type:e.type,rawId:(0,y.byteArrayToBase64)(e.rawId),response:{clientDataJSON:(0,y.byteArrayToBase64)(e.response.clientDataJSON),attestationObject:(0,y.byteArrayToBase64)(e.response.attestationObject)}}))})}).catch(function(e){console.log("nay",e.message)})}},{key:"renderDescription",value:function(){var e=window,t=e.ss.i18n,n=this.props.method;return l.default.createElement("p",null,t._t("MFAWebAuthnRegister.DESCRIPTION","Yo your browser should prompt you here"),l.default.createElement("a",{href:n.supportLink,target:"_blank",rel:"noopener noreferrer"},t._t("MFARegister.HELP","Find out more")))}},{key:"render",value:function(){return l.default.createElement("div",{className:"mfa-register-web-authn__container"},this.renderDescription())}}]),t}(s.Component);d.propTypes={keyData:p.default.object},t.default=d},"./client/src/components/WebAuthn/Verify.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n("./node_modules/react/index.js"),s=function(e){return e&&e.__esModule?e:{default:e}}(c),l=n("./client/src/lib/convert.js"),f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={failed:!1},n.handleStartAuth=n.handleStartAuth.bind(n),n}return u(t,e),a(t,[{key:"initAuth",value:function(){var e=this,t=this.props,n=t.publicKey,r=t.onCompleteVerification,o=i({},n,{challenge:(0,l.base64ToByteArray)(n.challenge),allowCredentials:n.allowCredentials.map(function(e){return i({},e,{id:(0,l.base64ToByteArray)(e.id)})})});this.setState({failed:!1}),navigator.credentials.get({publicKey:o}).then(function(e){r({credentials:btoa(JSON.stringify({id:e.id,type:e.type,rawId:(0,l.byteArrayToBase64)(e.rawId),response:{clientDataJSON:(0,l.byteArrayToBase64)(e.response.clientDataJSON),authenticatorData:(0,l.byteArrayToBase64)(e.response.authenticatorData),signature:(0,l.byteArrayToBase64)(e.response.signature),userHandle:e.response.userHandle?(0,l.byteArrayToBase64)(e.response.userHandle):null}}))})}).catch(function(t){e.setState({failed:t})})}},{key:"handleStartAuth",value:function(e){e.preventDefault(),this.initAuth()}},{key:"renderFailureDescription",value:function(){var e=window,t=e.ss.i18n,n=this.props.moreOptionsControl;return s.default.createElement("div",null,s.default.createElement("p",null,t._t("MFAWebAuthnVerify.FAIL_DESCRIPTION","Something seems to have gone wrong with your authentication.")),n,s.default.createElement("button",{onClick:this.handleStartAuth},"Try again"))}},{key:"renderSpinner",value:function(){var e=window,t=e.ss.i18n;return s.default.createElement("p",null,t._t("MFAWebAuthnVerify.USE_DESCRIPTION","Use your hardware security device..."))}},{key:"render",value:function(){var e=this.state.failed;return s.default.createElement("form",{className:"mfa-verify-web-authn__container"},s.default.createElement("div",{className:"mfa-verify-web-authn__content"},e?this.renderFailureDescription():this.renderSpinner()),s.default.createElement("div",{className:"mfa-verify-web-authn__icon"}))}}]),t}(c.Component);t.default=f},"./client/src/lib/convert.js":function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.base64ToByteArray=function(e){return Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)})},t.byteArrayToBase64=function(e){return btoa(String.fromCharCode.apply(String,r(new Uint8Array(e))))}},"./node_modules/object-assign/index.js":function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,c=r(e),s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var l in n)u.call(n,l)&&(c[l]=n[l]);if(o){a=o(n);for(var f=0;f<a.length;f++)i.call(n,a[f])&&(c[a[f]]=n[a[f]])}}return c}},"./node_modules/prop-types/factoryWithThrowingShims.js":function(e,t,n){"use strict";function r(){}function o(){}var u=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js");o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,i){if(i!==u){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},"./node_modules/prop-types/index.js":function(e,t,n){e.exports=n("./node_modules/prop-types/factoryWithThrowingShims.js")()},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"./node_modules/react/cjs/react.production.min.js":function(e,t,n){"use strict";function r(e,t,n,r,o,u,i,a){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,u,i,a],s=0;e=Error(t.replace(/%s/g,function(){return c[s++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function o(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=0;o<t;o++)n+="&args[]="+encodeURIComponent(arguments[o+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function u(e,t,n){this.props=e,this.context=t,this.refs=B,this.updater=n||$}function i(){}function a(e,t,n){this.props=e,this.context=t,this.refs=B,this.updater=n||$}function c(e,t,n){var r=void 0,o={},u=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(u=""+t.key),t)U.call(t,r)&&!L.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(1===a)o.children=n;else if(1<a){for(var c=Array(a),s=0;s<a;s++)c[s]=arguments[s+2];o.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===o[r]&&(o[r]=a[r]);return{$$typeof:w,type:e,key:u,ref:i,props:o,_owner:F.current}}function s(e,t){return{$$typeof:w,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function l(e){return"object"==typeof e&&null!==e&&e.$$typeof===w}function f(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function p(e,t,n,r){if(q.length){var o=q.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function y(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>q.length&&q.push(e)}function d(e,t,n,r){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var i=!1;if(null===e)i=!0;else switch(u){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case w:case S:i=!0}}if(i)return n(r,e,""===t?"."+b(e,0):t),1;if(i=0,t=""===t?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){u=e[a];var c=t+b(u,a);i+=d(u,c,n,r)}else if(null===e||"object"!=typeof e?c=null:(c=M&&e[M]||e["@@iterator"],c="function"==typeof c?c:null),"function"==typeof c)for(e=c.call(e),a=0;!(u=e.next()).done;)u=u.value,c=t+b(u,a++),i+=d(u,c,n,r);else"object"===u&&(n=""+e,o("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return i}function h(e,t,n){return null==e?0:d(e,"",t,n)}function b(e,t){return"object"==typeof e&&null!==e&&null!=e.key?f(e.key):t.toString(36)}function m(e,t){e.func.call(e.context,t,e.count++)}function v(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?_(e,r,n,function(e){return e}):null!=e&&(l(e)&&(e=s(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(V,"$&/")+"/")+n)),r.push(e))}function _(e,t,n,r,o){var u="";null!=n&&(u=(""+n).replace(V,"$&/")+"/"),t=p(t,u,r,o),h(e,v,t),y(t)}function g(){var e=W.current;return null===e&&o("307"),e}var j=n("./node_modules/object-assign/index.js"),O="function"==typeof Symbol&&Symbol.for,w=O?Symbol.for("react.element"):60103,S=O?Symbol.for("react.portal"):60106,A=O?Symbol.for("react.fragment"):60107,k=O?Symbol.for("react.strict_mode"):60108,P=O?Symbol.for("react.profiler"):60114,E=O?Symbol.for("react.provider"):60109,C=O?Symbol.for("react.context"):60110,x=O?Symbol.for("react.concurrent_mode"):60111,T=O?Symbol.for("react.forward_ref"):60112,R=O?Symbol.for("react.suspense"):60113,D=O?Symbol.for("react.memo"):60115,I=O?Symbol.for("react.lazy"):60116,M="function"==typeof Symbol&&Symbol.iterator,$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};u.prototype.isReactComponent={},u.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&o("85"),this.updater.enqueueSetState(this,e,t,"setState")},u.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},i.prototype=u.prototype;var N=a.prototype=new i;N.constructor=a,j(N,u.prototype),N.isPureReactComponent=!0;var W={current:null},F={current:null},U=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0},V=/\/+/g,q=[],H={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return _(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=p(null,null,t,n),h(e,m,t),y(t)},count:function(e){return h(e,function(){return null},null)},toArray:function(e){var t=[];return _(e,t,null,function(e){return e}),t},only:function(e){return l(e)||o("143"),e}},createRef:function(){return{current:null}},Component:u,PureComponent:a,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:C,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:E,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:T,render:e}},lazy:function(e){return{$$typeof:I,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:D,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return g().useCallback(e,t)},useContext:function(e,t){return g().useContext(e,t)},useEffect:function(e,t){return g().useEffect(e,t)},useImperativeHandle:function(e,t,n){return g().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return g().useLayoutEffect(e,t)},useMemo:function(e,t){return g().useMemo(e,t)},useReducer:function(e,t,n){return g().useReducer(e,t,n)},useRef:function(e){return g().useRef(e)},useState:function(e){return g().useState(e)},Fragment:A,StrictMode:k,Suspense:R,createElement:c,cloneElement:function(e,t,n){(null===e||void 0===e)&&o("267",e);var r=void 0,u=j({},e.props),i=e.key,a=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(a=t.ref,c=F.current),void 0!==t.key&&(i=""+t.key);var s=void 0;e.type&&e.type.defaultProps&&(s=e.type.defaultProps);for(r in t)U.call(t,r)&&!L.hasOwnProperty(r)&&(u[r]=void 0===t[r]&&void 0!==s?s[r]:t[r])}if(1==(r=arguments.length-2))u.children=n;else if(1<r){s=Array(r);for(var l=0;l<r;l++)s[l]=arguments[l+2];u.children=s}return{$$typeof:w,type:e.type,key:i,ref:a,props:u,_owner:c}},createFactory:function(e){var t=c.bind(null,e);return t.type=e,t},isValidElement:l,version:"16.8.4",unstable_ConcurrentMode:x,unstable_Profiler:P,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:W,ReactCurrentOwner:F,assign:j}},J={default:H},K=J&&H||J;e.exports=K.default||K},"./node_modules/react/index.js":function(e,t,n){"use strict";e.exports=n("./node_modules/react/cjs/react.production.min.js")},0:function(e,t){e.exports=Injector}});